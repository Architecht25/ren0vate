<div class="container my-5">

  <div class="text-center mb-5">
    <h1 class="display-4">Ren0vate</h1>
    <p class="lead text-muted">Bienvenue dans notre app, qui veut du bien √† votre portefeuille üè°üí∂</p>
    <%= link_to "Voir la liste des primes en Flandre", primes_path, class: "btn btn-outline-primary mt-3" %>
  </div>

  <!-- S√©lecteur de r√©gion -->
  <div class="card mb-4 shadow-sm" data-controller="region-selector">
    <div class="card-body text-center">
      <h3 class="card-title mb-3">Dans quelle r√©gion se situe le bien √† r√©nover ?</h3>
      <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-primary" data-action="click->region-selector#select" data-region="flandre">Flandre</button>
        <button type="button" class="btn btn-outline-primary" data-action="click->region-selector#select" data-region="wallonie">Wallonie</button>
        <button type="button" class="btn btn-outline-primary" data-action="click->region-selector#select" data-region="bruxelles">Bruxelles</button>
      </div>
    </div>
  </div>

  <!-- Affichage des profils -->
  <div data-controller="region-display">
    <%# Flandre %>
    <div data-region-display-target="flandre" class="d-none" data-controller="user-type">
      <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
          <h4 class="mb-3">Flandre ‚Äì Quel est votre profil ?</h4>
          <div class="btn-group flex-wrap" role="group">
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="prive">Particulier</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="entreprise">Entreprise</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="syndic">Syndic de Copropri√©t√©</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="bailleur">Bailleur social</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="asbl">ASBL / Coop√©rative</button>
          </div>
        </div>
      </div>
    </div>

    <%# Wallonie %>
    <div data-region-display-target="wallonie" class="d-none">
      <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
          <h4 class="mb-3">Wallonie ‚Äì Quel est votre profil ?</h4>
          <div class="btn-group" role="group">
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="prive">Particulier</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="entreprise">Entreprise</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="syndic">Syndic de Copropri√©t√©</button>
          </div>
        </div>
      </div>
    </div>

    <%# Bruxelles %>
    <div data-region-display-target="bruxelles" class="d-none">
      <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
          <h4 class="mb-3">Bruxelles ‚Äì Quel est votre profil ?</h4>
          <div class="btn-group" role="group">
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="prive">Particulier</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="entreprise">Entreprise</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="syndic">Syndic de Copropri√©t√©</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="ais">AIS</button>
            <button class="btn btn-outline-success m-1" data-action="click->user-type#select" data-user="autres">Autres</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Test d‚Äô√©ligibilit√© -->
  <div id="eligibility-test" data-controller="test-eligibilite" class="d-none">
    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="mb-4">Test d‚Äô√©ligibilit√©</h3>
        <form id="eligibilityForm" name="eligibilityForm" data-test-eligibilite-target="form">
          <%# R√©p√®te cette structure pour chaque step %>
          <% steps = {
            "usage" => "Le bien est-il destin√© √† √™tre habit√© ?",
            "proprietaire" => "√ätes-vous propri√©taire du bien ?",
            "autre_bien" => "Poss√©dez-vous un autre bien/appartement/terrain ?",
            "annee" => "Le logement a-t-il √©t√© construit avant 2006 ?",
            "type" => "Le logement est-il une maison?",
            "peb" => "Le certificat PEB indique-t-il un label E ou F ?",
            "domicile" => "√ätes-vous ou serez-vous domicili√© dans ce logement ?",
            "demolition" => "Le logement est-il un ancien b√¢timent d√©moli avec TVA 6% ?",
            "travaux" => "Pr√©voyez-vous des travaux d‚Äôisolation ou de chauffage ?",
            "protege" => "√ätes-vous un client prot√©g√© ?"
          } %>

          <% steps.each do |key, question| %>
            <div class="form-card mb-4" data-test-eligibilite-target="formCard">
              <h5><%= question %></h5>
              <div class="form-check">
                <input type="radio" class="form-check-input" name="<%= key %>" value="oui" data-action="click->test-eligibilite#handleAnswer" id="<%= key %>_oui">
                <label class="form-check-label" for="<%= key %>_oui">Oui</label>
              </div>
              <div class="form-check">
                <input type="radio" class="form-check-input" name="<%= key %>" value="non" data-action="click->test-eligibilite#handleAnswer" id="<%= key %>_non">
                <label class="form-check-label" for="<%= key %>_non">Non</label>
              </div>
            </div>
          <% end %>
        </form>

        <div id="result"
          data-test-eligibilite-target="result"
          class="alert alert-info mt-4"
          style="display: none;">
      </div>

      </div>
    </div>
  </div>

</div>
